# OpenAI Integration Setup

This guide will help you set up OpenAI GPT-4 integration for your Clinical Copilot application.

## Prerequisites

1. **OpenAI API Account**: Sign up at [OpenAI Platform](https://platform.openai.com/)
2. **API Key**: Generate an API key from your OpenAI dashboard

## Setup Instructions

### 1. Get Your OpenAI API Key

1. Go to [OpenAI Platform](https://platform.openai.com/)
2. Sign in or create an account
3. Navigate to API Keys section
4. Create a new API key
5. Copy the API key (starts with `sk-`)

### 2. Configure Environment Variables

1. Copy the example environment file:
   ```bash
   cp my-react-app/.env.example my-react-app/.env
   ```

2. Edit `my-react-app/.env` and add your API key:
   ```
   REACT_APP_OPENAI_API_KEY=sk-your-actual-api-key-here
   REACT_APP_API_BASE_URL=http://localhost:5001
   ```

### 3. Restart the Application

After adding the environment variables, restart both servers:

```bash
# Stop current servers (Ctrl+C)
# Then restart:

# Backend
cd server && npm start

# Frontend  
cd my-react-app && npm start
```

## Features Enabled

With OpenAI integration, you now have:

### ü§ñ AI Assistant
- **Real-time patient analysis** using GPT-4
- **Intelligent insights** based on patient data
- **Clinical recommendations** and treatment suggestions
- **Natural language queries** about your patients

### üìã AI Summary Generator
- **Comprehensive patient summaries** generated by GPT-4
- **Clinical assessments** and risk evaluations
- **Treatment recommendations** based on patient data
- **Professional medical documentation**

### üîç Smart Analysis
- **Pattern recognition** across patient data
- **Risk assessment** and early warning indicators
- **Medication interaction analysis**
- **Clinical decision support**

## API Usage

The application uses the following OpenAI models:
- **Primary Model**: GPT-4 (gpt-4)
- **Max Tokens**: 2000 per request
- **Temperature**: 0.7 (balanced creativity/accuracy)

## Cost Considerations

- **GPT-4 Pricing**: ~$0.03 per 1K input tokens, ~$0.06 per 1K output tokens
- **Typical Usage**: Each patient summary costs ~$0.10-0.20
- **Monthly Estimate**: For 100 patients, expect ~$10-20/month

## Troubleshooting

### Common Issues

1. **"API Key Not Found" Error**
   - Ensure `.env` file exists in `my-react-app/` directory
   - Check that `REACT_APP_OPENAI_API_KEY` is set correctly
   - Restart the React development server

2. **"Rate Limit Exceeded" Error**
   - You've hit OpenAI's rate limits
   - Wait a few minutes and try again
   - Consider upgrading your OpenAI plan

3. **"Invalid API Key" Error**
   - Verify your API key is correct
   - Ensure you have credits in your OpenAI account
   - Check that the key has proper permissions

4. **CORS Errors**
   - The app uses `dangerouslyAllowBrowser: true` for development
   - In production, move API calls to your backend server

### Fallback Behavior

If OpenAI API fails, the application will:
- Show error messages to users
- Fall back to mock responses in some cases
- Continue functioning with limited AI features

## Security Notes

‚ö†Ô∏è **Important**: 
- Never commit your `.env` file to version control
- The current setup uses browser-side API calls (development only)
- For production, move OpenAI calls to your backend server
- Consider implementing API key rotation and monitoring

## Support

For issues with:
- **OpenAI API**: Check [OpenAI Documentation](https://platform.openai.com/docs)
- **Application**: Check the browser console for error messages
- **Setup**: Verify all environment variables are correctly set

## Next Steps

1. Test the AI features with your patient data
2. Customize prompts in `src/services/OpenAIService.js`
3. Monitor API usage in your OpenAI dashboard
4. Consider implementing backend API calls for production
